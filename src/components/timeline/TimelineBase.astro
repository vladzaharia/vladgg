---
import { getJobColor } from "../../utils/colors";
import TimelineYearMarkers from "./TimelineYearMarkers.astro";

interface Props {
  jobs: Array<{
    position: {
      startPosition: number;
      endPosition: number;
    };
  }>;
  years: Array<{
    year: number;
    position: number;
  }>;
}

const { jobs, years } = Astro.props;
---

<div class="absolute inset-0">
  {/* Main timeline line */}
  <div class="absolute left-1/2 w-1 h-full -ml-0.5 bg-slate-700">
    <TimelineYearMarkers years={years} />

    {/* Duration points */}
    {jobs.map((job, index) => {
      const color = getJobColor(index);
      return (
        <div 
          class={`absolute left-1/2 -translate-x-1/2 w-3 rounded-sm transition-all duration-300 ${color.bg}`}
          style={{
            top: `${job.position.startPosition * 100}%`,
            height: `${Math.max((job.position.endPosition - job.position.startPosition) * 100, 2)}%`
          }}
        >
        </div>
      );
    })}
  </div>
</div>
