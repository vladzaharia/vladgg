---
interface Props {
  entry: {
    title: string;
    company: {
      name: string;
      logo?: string;
    };
    location: string;
    dateFrom: string;
    dateTo?: string;
  };
  position: {
    startPosition: number;
    endPosition: number;
    isShortTerm: boolean;
  };
  slug: string;
  index: number;
}

const { entry, position, slug, index } = Astro.props;
const isLeft = index % 2 === 1;
const centerPosition = (position.startPosition + position.endPosition) / 2;
---

<a 
  href={`/experience/${slug}`}
  class="absolute flex items-center group"
  style={{
    top: `${centerPosition * 100}%`,
    [isLeft ? 'left' : 'right']: '52%',
    width: '45%',
    transform: `translateY(-50%)`
  }}
>
  <div class="relative w-full">
    {/* Horizontal line to timeline */}
    <div 
      class="absolute top-1/2 h-px bg-slate-600 group-hover:bg-slate-500 transition-colors"
      style={{
        [isLeft ? 'right' : 'left']: '0',
        width: '7%'
      }}
    ></div>
    
    {/* Content card */}
    {position.isShortTerm ? (
      <div class="bg-slate-800/50 backdrop-blur-sm rounded-lg p-2.5 pb-2 border border-slate-700/50 hover:border-slate-600/50 transition-all hover:translate-x-0.5 hover:shadow-lg">
        <div class="flex flex-col gap-1">
          <div class="flex items-center gap-2">
            {entry.company.logo && (
              <img 
                src={entry.company.logo} 
                alt={entry.company.name}
                class="h-5 w-auto flex-shrink-0"
              />
            )}
            <h3 class="text-sm font-bold font-display">{entry.title}</h3>
          </div>
          <div class="flex justify-between items-center text-sm text-slate-300">
            <div>{entry.company.name}</div>
            <div>{entry.location}</div>
          </div>
        </div>
      </div>
    ) : (
      <div class="bg-slate-800/50 backdrop-blur-sm rounded-lg p-4 border border-slate-700/50 hover:border-slate-600/50 transition-all hover:translate-x-0.5 hover:shadow-lg">
        <div class="flex flex-col gap-1">
          <h3 class="text-lg font-bold font-display">{entry.title}</h3>
          <div class="flex items-center gap-2 text-slate-300">
            {entry.company.logo && (
              <img 
                src={entry.company.logo} 
                alt={entry.company.name}
                class="h-5 w-auto"
              />
            )}
            <span>{entry.company.name}</span>
          </div>
          <div class="text-sm text-slate-400">{entry.location}</div>
        </div>
      </div>
    )}
  </div>
</a>
