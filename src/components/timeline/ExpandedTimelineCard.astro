---
interface Props {
  entry: {
    position: string;
    positionShort?: string;
    company: {
      name: string;
      nameShort: string | null;
      logo: string | null;
    };
    location: string;
    dateFrom: string;
    dateTo: string | null;
  };
  color: {
    border: string;
    text: string;
    shadow: string;
    darkText: string;
  };
  startDate: string;
  endDate: string;
}

const { entry, color, startDate, endDate } = Astro.props;
---

<div class="timeline-card-expanded fixed hidden z-50 inset-0">
  <div class="fixed inset-0 bg-slate-900/80 backdrop-blur-md"></div>
  <div
    class={`
      expanded-content
      bg-slate-800 rounded-lg border overflow-auto
      transition-transform duration-300 ease-[cubic-bezier(0.4,0,0.2,1)]
      h-[60vh] w-[40vw] relative z-10 ${color.shadow}
      ${color.border}
    `}
  >
    <div
      class="sticky top-0 flex justify-between items-start p-6 bg-slate-800/95 backdrop-blur-sm border-b border-slate-700"
    >
      <h2 class="text-2xl font-bold">{entry.position}</h2>
      <button class="close-expanded text-gray-400 hover:text-white">
        <svg
          xmlns="http://www.w3.org/2000/svg"
          class="h-6 w-6"
          fill="none"
          viewBox="0 0 24 24"
          stroke="currentColor"
        >
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M6 18L18 6M6 6l12 12"></path>
        </svg>
      </button>
    </div>
    <div class="p-6 space-y-4">
      <div>
        <h3 class="text-xl">{entry.company.name}</h3>
        <p class="text-gray-400">{entry.location}</p>
        <p class="text-gray-400">{startDate} - {endDate}</p>
      </div>
      <slot name="expanded" />
    </div>
  </div>
</div>

<style>
  .timeline-card-expanded {
    opacity: 0;
    transition: opacity 0.3s ease-in-out;
  }

  .timeline-card-expanded.opacity-100 {
    opacity: 1;
  }

  .expanded-content {
    position: fixed;
    left: 50%;
    top: 50%;
    transform: translate(-50%, -50%);
  }
</style>
